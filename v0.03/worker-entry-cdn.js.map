{"version":3,"sources":["webpack:///webpack/bootstrap c7e5d1686d696d08da65","webpack:///./~/assert/assert.js","webpack:///../arcs/runtime/type.js","webpack:///./~/process/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///../arcs/runtime/entity.js","webpack:///../arcs/runtime/particle.js","webpack:///../arcs/runtime/symbols.js","webpack:///../arcs/runtime/~/tracelib/trace.js","webpack:///../arcs/runtime/particle-spec.js","webpack:///../arcs/runtime/schema.js","webpack:///./~/path-browserify/index.js","webpack:///../arcs/runtime/dom-particle.js","webpack:///../arcs/runtime/relation.js","webpack:///../arcs/runtime/runtime.js","webpack:///../arcs/runtime/view.js","webpack:///./source/browser-cdn-loader.js","webpack:///../arcs/runtime/inner-PEC.js","webpack:///./~/indexof/index.js","webpack:///./~/util/~/inherits/inherits_browser.js","webpack:///./~/util/support/isBufferBrowser.js","webpack:///./~/util/util.js","webpack:///./~/vm-browserify/index.js","webpack:///./source/worker-entry-cdn.js","webpack:///../arcs/runtime/api-channel.js","webpack:///../arcs/runtime/browser/lib/xen-state.js","webpack:///../arcs/runtime/identifier.js","webpack:///../arcs/runtime/loader.js","webpack:///../arcs/runtime/~/minimist/index.js","webpack:///../arcs/runtime/~/mkdirp/index.js","webpack:///../arcs/runtime/~/tracelib/options.js","webpack:///../arcs/runtime/scheduler.js","webpack:///../arcs/runtime/viewlet.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;8CChEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,8BAA8B;AAC9B;AACA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gDAAgD;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gCAAgC,oBAAoB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACzeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,sCAAsC,KAAK;AAC3C;AACA;AACA,QAAQ;AACR;AACA,6CAA6C,UAAU,EAAE,SAAS;AAClE;AACA,yBAAyB,KAAK;AAC9B;AACA,QAAQ;AACR,GAAG;AACH,sCAAsC,KAAK;AAC3C;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA,QAAQ;AACR;AACA;AACA,+CAA+C,UAAU,EAAE,SAAS;AACpE;AACA,2BAA2B,KAAK;AAChC;AACA,UAAU;AACV;AACA;AACA,6CAA6C,KAAK;AAClD;AACA;AACA,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gCAAgC;AAChD;AACA,iBAAiB,kBAAkB;AACnC;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACzJA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,+DAA+D,4BAA4B;AAC1H,mEAAmE,qDAAqD,2BAA2B;AACnJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe,IAAI,UAAU,IAAI,IAAI,MAAM,UAAU;AAChE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C,SAAS;AACvD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC,KAAK,EAAE;;AAEhF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,S;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACxOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS,+DAA+D;AACxE;AACA,WAAW,sBAAsB;AACjC;AACA,cAAc;AACd,KAAK;AACL,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,iBAAiB;AAC3D,0CAA0C,iBAAiB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;;;;;;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,IAAI;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oCAAoC,8BAA8B;AAClE;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,oBAAoB;AAC9B;AACA;;AAEA;AACA,UAAU,UAAU;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,sBAAsB;AACrD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;;;;;;;;;AC/NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA,qEAAqE;AACrE;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,eAAe;AACtD;AACA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,6BAA6B,GAAG;AAChC;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;AC1CD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,mDAAmD,4BAA4B;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,2BAA2B;AACxD;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAmC,6CAA6C;AAChF,sDAAsD;;AAEtD;AACA;;AAEA;AACA;AACA,yBAAyB,gCAAgC;AACzD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,yCAAyC,iBAAiB;AACzF;;AAEA;AACA;AACA,kBAAkB,SAAS;AAC3B;AACA,4BAA4B,sCAAsC;AAClE;AACA;;AAEA;AACA,+BAA+B,0CAA0C,iBAAiB;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,SAAS;AAC3B,0BAA0B,yCAAyC;AACnE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,2CAA2C;AACrE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,CAAC;;;;;;;;ACxND;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,KAAK,MAAM,IAAI;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,6DAA6D;AACzF;AACA;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,kDAAkD;AAC9E;;AAEA;AACA;AACA,0BAA0B,iBAAiB,WAAW,cAAc;AACpE;;AAEA;AACA;AACA,6BAA6B,wCAAwC;AACrE;;AAEA;AACA,wBAAwB,yBAAyB;AACjD;;AAEA;AACA,0BAA0B,yBAAyB;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;;AAEA,uCAAuC,qCAAqC;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,YAAY;;AAEpB,qCAAqC,eAAe;;AAEpD,kCAAkC,QAAQ;AAC1C,8CAA8C,mCAAmC;;AAEjF,gCAAgC,0BAA0B;;AAE1D,oCAAoC,iCAAiC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C,wBAAwB,uBAAuB;AAC/C,0BAA0B,yBAAyB;AACnD;AACA,qCAAqC,4BAA4B;;AAEjE,+CAA+C,0CAA0C;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mCAAmC,mBAAmB;AACtD;AACA,2CAA2C,cAAc,QAAQ,SAAS;AAC1E;AACA;AACA;;AAEA;AACA,cAAc,aAAa,GAAG,oBAAoB;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AC5NA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA,E;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,uBAAuB,SAAS;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,KAAK;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACzkBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;;;;;;;ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,OAAO,SAAS;AAChB;AACA;AACA;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gCAAgC;AAChC;AACA,OAAO,kEAAkE;AACzE,qDAAqD,yCAAyC;AAC9F;AACA,OAAO,8EAA8E;;AAErF,kCAAkC,iEAAiE;AACnG,uCAAuC,yCAAyC;AAChF,oCAAoC,qBAAqB;AACzD,sCAAsC,mFAAmF;AACzH,qCAAqC,6CAA6C;;AAElF,oCAAoC,mEAAmE;AACvG,yCAAyC;AACzC;AACA,+DAA+D;AAC/D,qCAAqC,yCAAyC;AAC9E,wCAAwC,yCAAyC;AACjF,qCAAqC,qCAAqC;AAC1E,uCAAuC,qCAAqC;AAC5E,kCAAkC,oEAAoE;AACtG;AACA;;AAEA;AACA;AACA;;AAEA,mCAAmC;AACnC;AACA;AACA,OAAO,+DAA+D;AACtE,mDAAmD,yCAAyC;AAC5F;AACA,OAAO,8EAA8E;;AAErF,qCAAqC,iEAAiE;AACtG,0CAA0C,8CAA8C;AACxF,uCAAuC,qBAAqB;AAC5D,yCAAyC,wEAAwE;AACjH,wCAAwC,6CAA6C;;AAErF,iCAAiC,mEAAmE;AACpG,sCAAsC;AACtC;AACA,iEAAiE;AACjE,kCAAkC,8CAA8C;AAChF,qCAAqC,8CAA8C;AACnF,kCAAkC,qCAAqC;AACvE,oCAAoC,qCAAqC;AACzE,+BAA+B,oEAAoE;AACnG;AACA;;AAEA,kBAAkB;;;;;;;ACrQlB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gC;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB,KAAK;AAC7B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC,SAAS;AAC9C;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,oFAAoF,EAAE;AACtF;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,mDAAmD;AAC/E;;AAEA;;AAEA;;;;;;;AC1EA;AACA;;AAEA,iBAAiB,WAAW,cAAc;;AAE1C;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;;AAEA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAM;;AAEN;;AAEA,gBAAgB;AAChB;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;;AAEA,mBAAmB,iBAAiB;AACpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,oBAAoB;AAC/C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;AC1OA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,0CAA0C;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,+BAA+B,yDAAyD,sEAAsE;;AAE9J;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO,YAAY;AACnB;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,G;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB","file":"././v0.03/worker-entry-cdn.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c7e5d1686d696d08da65","'use strict';\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/assert/assert.js\n// module id = 0\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst assert = require('assert');\n\nlet nextVariableId = 0;\n\nfunction addType(name, tag, args) {\n  var lowerName = name[0].toLowerCase() + name.substring(1);\n  if (args.length == 1) {\n    Object.defineProperty(Type, `new${name}`, {\n      value: function() {\n        return new Type(tag, arguments[0]);\n      }});\n    var upperArg = args[0][0].toUpperCase() + args[0].substring(1);\n    Object.defineProperty(Type.prototype, `${lowerName}${upperArg}`, {\n      get: function() {\n        assert(this[`is${name}`]);\n        return this.data;\n      }});\n  } else {\n    Object.defineProperty(Type, `new${name}`, {\n      value: function() {\n        var data = {};\n        for (var i = 0; i < args.length; i++)\n          data[args[i]] = arguments[i];\n        return new Type(tag, data);\n      }});\n    for (var arg of args) {\n      var upperArg = arg[0].toUpperCase() + arg.substring(1);\n      Object.defineProperty(Type.prototype, `${lowerName}${upperArg}`, {\n        get: function() {\n          assert(this[`is${name}`]);\n          return this.data[arg];\n        }});\n    }\n  }\n  Object.defineProperty(Type.prototype, `is${name}`, {\n    get: function() {\n      return this.tag == tag;\n    }});\n}\n\nclass Type {\n  constructor(tag, data) {\n    assert(typeof tag == 'string');\n    assert(data);\n    if (tag == 'entity')\n      assert(data.tag == undefined);\n    this.tag = tag;\n    this.data = data;\n  }\n\n  // TODO: Replace these static functions with operations on Types directly.\n  // Replaces 'prevariable' types with 'variable'+id types .\n  assignVariableIds(variableMap) {\n    if (this.isVariableReference) {\n      var name = this.data.name;\n      var id = variableMap.get(name);\n      if (id == undefined) {\n        id = nextVariableId++;\n        variableMap.set(name, id);\n      }\n      return Type.newVariable(name, id);\n    }\n\n    if (this.isView) {\n      return this.primitiveType().assignVariableIds(variableMap).viewOf();\n    }\n\n    return this;\n  }\n\n  // Replaces raw strings with resolved schemas.\n  resolveSchemas(resolveSchema) {\n    if (this.isEntityReference) {\n      // TODO: This should probably all happen during type construction so that\n      //       we can cache the schema objet.\n      return Type.newEntity(resolveSchema(this.data).toLiteral());\n    }\n\n    if (this.isView) {\n      return this.primitiveType().resolveSchemas(resolveSchema).viewOf();\n    }\n\n    return this;\n  }\n\n  equals(type) {\n    if (this.tag !== type.tag)\n      return false;\n    if (this.tag == 'entity') {\n      // TODO: Remove this hack that allows the old resolver to match\n      //       types by schema name.\n      return this.data.name == type.data.name;\n    }\n    if (this.isView) {\n      return this.data.equals(type.data);\n    }\n    return JSON.stringify(this.data) == JSON.stringify(type.data);\n  }\n\n  get isValid() {\n    return !this.variableReference;\n  }\n\n  primitiveType() {\n    var type = this.viewType;\n    return new Type(type.tag, type.data);\n  }\n\n  toLiteral() {\n    return this;\n  }\n\n  static fromLiteral(literal) {\n    return new Type(literal.tag, literal.data);\n  }\n\n  viewOf() {\n    return Type.newView(this);\n  }\n\n  // TODO: rename toString to describe\n  toString() {\n    if (this.isRelation)\n      return JSON.stringify(this.data);\n    if (this.isView)\n      return `${this.primitiveType().toString()} List`;\n    if (this.isVariable)\n      return `[${this.variableName}]`;\n    if (this.isVariableReference)\n      return `[${this.variableReferenceName}]`;\n    if (this.isEntity)\n      return this.entitySchema.name;\n    if (this.isEntityReference)\n      return this.entityReferenceName;\n  }\n}\n\naddType('EntityReference', 'entityReference', ['name']);\naddType('Entity', 'entity', ['schema']);\naddType('VariableReference', 'variableReference', ['name']);\naddType('Variable', 'variable', ['name', 'id']);\naddType('View', 'list', ['type']);\naddType('Relation', 'relation', ['entities']);\n\nmodule.exports = Type;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/type.js\n// module id = 1\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/process/browser.js\n// module id = 2\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 3\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst assert = require('assert');\nconst Symbols = require('./symbols.js');\nconst Type = require('./type.js');\n\nclass Entity {\n  constructor() {\n    this[Symbols.identifier] = undefined;\n  }\n  get data() {\n    return undefined;\n  }\n\n  isIdentified() {\n    return this[Symbols.identifier] !== undefined;\n  }\n  identify(identifier) {\n    assert(!this.isIdentified());\n    this[Symbols.identifier] = identifier;\n  }\n  toLiteral() {\n    return this.rawData;\n  }\n\n  get debugString() {\n    return JSON.stringify(this.rawData);\n  }\n\n  static get type() {\n    // TODO: should the entity's key just be its type?\n    // Should it just be called type in that case?\n    return Type.newEntity(this.key.schema);\n  }\n}\n\nmodule.exports = Entity;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/entity.js\n// module id = 4\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nvar runtime = require(\"./runtime.js\");\nvar ParticleSpec = require(\"./particle-spec.js\");\nvar tracing = require('tracelib');\nvar assert = require('assert');\nconst Schema = require('./schema.js');\n\nconst DEBUGGING = false;\n\nclass Particle {\n  constructor() {\n    this.spec = this.constructor.spec;\n    if (this.spec.inputs.length == 0)\n      this.extraData = true;\n    this.relevances = [];\n    this._idle = Promise.resolve();\n    this._idleResolver = null;\n    this._busy = 0;\n    this.slotHandlers = [];\n    this.stateHandlers = new Map();\n    this.states = new Map();\n    this._slotByName = new Map();\n  }\n\n  // Override this to do stuff\n  setViews(views) {\n\n  }\n\n  get busy() {\n    return this._busy > 0;\n  }\n\n  get idle() {\n    return this._idle;\n  }\n\n  setBusy() {\n    if (this._busy == 0)\n    this._idle = new Promise((resolve, reject) => {\n      this._idleResolver = resolve;\n    });\n    this._busy++;\n  }\n\n  setIdle() {\n    assert(this._busy > 0);\n    this._busy--;\n    if (this._busy == 0)\n      this._idleResolver();\n  }\n\n  set relevance(r) {\n    this.relevances.push(r);\n  }\n\n  // Override this to do stuff\n  dataUpdated() {\n  }\n\n  inputs() {\n    return this.spec.inputs;\n  }\n\n  outputs() {\n    return this.spec.outputs;\n  }\n\n  getSlot(name) {\n    return this._slotByName.get(name);\n  }\n\n  addSlotHandler(f) {\n    this.slotHandlers.push(f);\n  }\n\n  addStateHandler(states, f) {\n    states.forEach(state => {\n      if (!this.stateHandlers.has(state)) {\n        this.stateHandlers.set(state, []);\n      }\n      this.stateHandlers.get(state).push(f);\n    });\n  }\n\n  emit(state, value) {\n    this.states.set(state, value);\n    this.stateHandlers.get(state).forEach(f => f(value));\n  }\n\n  on(views, names, action, f) {\n    if (typeof names == \"string\")\n      names = [names];\n    var trace = tracing.start({cat: 'particle', names: this.constructor.name + \"::on\", args: {view: names, event: action}});\n    names.forEach(name => views.get(name).on(action, tracing.wrap({cat: 'particle', name: this.constructor.name, args: {view: name, event: action}}, f), this));\n    trace.end();\n  }\n\n  logDebug(tag, view) {\n    if (!DEBUGGING)\n      return;\n    let direction = this.spec.connectionMap.get(tag).direction;\n    view.debugString().then(v => console.log(\n       `(${this.spec.name})(${direction})(${tag}): (${view.name})`, v));\n  }\n\n  when(changes, f) {\n    changes.forEach(change => change.register(this, f));\n  }\n\n  fireEvent(slotName, event) {\n    // TODO(sjmiles): tests can get here without a `this.slot`, maybe this needs to be fixed in MockSlotManager?\n    let slot = this.getSlot(slotName);\n    assert(slot, `Particle::fireEvent: slot ${slotName} is falsey`);\n    slot.fireEvent(event);\n  }\n}\n\nclass ViewChanges {\n  constructor(views, names, type) {\n    if (typeof names == \"string\")\n      names = [names];\n    this.names = names;\n    this.views = views;\n    this.type = type;\n  }\n  register(particle, f) {\n    var modelCount = 0;\n    var afterAllModels = () => { if (++modelCount == this.names.length) { f(); } };\n\n    for (var name of this.names) {\n      var view = this.views.get(name);\n      view.synchronize(this.type, afterAllModels, f, particle)\n    }\n  }\n}\n\nclass SlotChanges {\n  constructor() {\n  }\n  register(particle, f) {\n    particle.addSlotHandler(f);\n  }\n}\n\nclass StateChanges {\n  constructor(states) {\n    if (typeof states == \"string\")\n      states = [states];\n    this.states = states;\n  }\n  register(particle, f) {\n    particle.addStateHandler(this.states, f);\n  }\n}\n\nexports.Particle = Particle;\nexports.ViewChanges = ViewChanges;\nexports.SlotChanges = SlotChanges;\nexports.StateChanges = StateChanges;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/particle.js\n// module id = 5\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nexports.identifier = Symbol('id');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/symbols.js\n// module id = 6\n// module chunks = 0","/*\n  Copyright 2015 Google Inc. All Rights Reserved.\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n      http://www.apache.org/licenses/LICENSE-2.0\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n\nvar fs = require('fs');\nvar mkdirp = require('mkdirp');\nvar path = require('path');\nvar options = require('./options');\n\nvar events = [];\nif (global.document) {\n  var pid = process.pid;\n  var now = function() {\n    var t = performance.now();\n    return t;\n  }\n} else {\n  var pid = 42;\n  var now = function() {\n    var t = process.hrtime();\n    return t[0] * 1000000 + t[1] / 1000;\n  }\n}\n\nvar asyncId = 0;\nvar flowId = 0;\n\nfunction parseInfo(info) {\n  if (!info)\n    return {args: {}};\n  if (typeof info == 'function')\n    return parseInfo(info());\n  if (info.toTraceInfo)\n    return parseInfo(info.toTraceInfo());\n  if (info.args == undefined)\n    info.args = {};\n  return info;\n}\n\nmodule.exports.options = options;\nvar enabled = Boolean(options.traceFile);\n\nfunction init() {\n  module.exports.enable = function() {\n    enabled = true;\n    init();\n  };\n  module.exports.enabled = enabled;\n\n  var result = {\n    start: function() {\n      return this;\n    },\n    update: function() {\n      return this;\n    },\n    end: function() {\n      return this;\n    },\n    step: function() {\n      return this;\n    },\n    endWrap: function(fn) {\n      return fn;\n    },\n  };\n  module.exports.wrap = function(info, fn) {\n    return fn;\n  };\n  module.exports.start = function(info, fn) {\n    return result;\n  };\n  module.exports.async = function(info, fn) {\n    return result;\n  };\n  module.exports.flow = function(info, fn) {\n    return result;\n  };\n  module.exports.dump = function() {\n  };\n\n  if (!enabled) {\n    return;\n  }\n\n  module.exports.wrap = function(info, fn) {\n    return function() {\n      var t = module.exports.start(info);\n      try {\n        return fn.apply(this, arguments);\n      } finally {\n        t.end();\n      }\n    };\n  };\n  module.exports.start = function(info) {\n    info = parseInfo(info);\n    var begin = now();\n    return {\n      update: function(args) {\n        for (var k in args) {\n          info.args[k] = args[k];\n        }       \n      },\n      end: function(endInfo) {\n        var end = now();\n        if (endInfo && endInfo.args) {\n          for (var k in endInfo.args) {\n            info.args[k] = endInfo.args[k]\n          }\n        }\n        events.push({\n          ph: 'X',\n          ts: begin,\n          dur: end - begin,\n          cat: info.cat,\n          name: info.name,\n          args: info.args,\n        });\n      },\n    };\n  };\n  module.exports.async = function(info) {\n    info = parseInfo(info);\n    var id = asyncId++;\n    var begin = now();\n    events.push({\n      ph: 'b',\n      ts: begin,\n      cat: info.cat,\n      name: info.name,\n      args: info.args,\n      id: id,\n    });\n    return {\n      end: function(endInfo) {\n        var end = now();\n        endInfo = parseInfo(endInfo);\n        events.push({\n          ph: 'e',\n          ts: end,\n          cat: info.cat,\n          name: info.name,\n          args: endInfo && endInfo.args,\n          id: id,\n        });\n      },\n      endWrap: function(fn) {\n        var self = this;\n        return function() {\n          self.end();\n          fn.apply(this, arguments);\n        }\n      }\n    };\n  };\n  module.exports.flow = function(info) {\n    info = parseInfo(info);\n    var id = flowId++;\n    var started = false;\n    return {\n      start: function() {\n        var begin = now();\n        started = true;\n        events.push({\n          ph: 's',\n          ts: begin,\n          cat: info.cat,\n          name: info.name,\n          args: info.args,\n          id: id,\n        });\n        return this;\n      },\n      end: function(endInfo) {\n        if (!started) return;\n        var end = now();\n        endInfo = parseInfo(endInfo);\n        events.push({\n          ph: 'f',\n          ts: end,\n          cat: info.cat,\n          name: info.name,\n          args: endInfo && endInfo.args,\n          id: id,\n        });\n        return this;\n      },\n      step: function(stepInfo) {\n        if (!started) return;\n        var step = now();\n        stepInfo = parseInfo(stepInfo);\n        events.push({\n          ph: 't',\n          ts: step,\n          cat: info.cat,\n          name: info.name,\n          args: stepInfo && stepInfo.args,\n          id: id,\n        });\n        return this;\n      },\n    };\n  };\n  module.exports.save = function() {\n    events.forEach(function(event) {\n      event.pid = pid;\n      event.tid = 0;\n      if (!event.args) {\n        delete event.args;\n      }\n      if (!event.cat) {\n        event.cat = '';\n      }\n    });\n    return {traceEvents: events};\n  };\n  module.exports.dump = function() {\n    mkdirp.sync(path.dirname(options.traceFile));\n    fs.writeFileSync(options.traceFile, module.exports.save());\n  };\n}\n\ninit();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/~/tracelib/trace.js\n// module id = 8\n// module chunks = 0","  /**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nconst runtime = require(\"./runtime.js\");\nconst Type = require('./type.js');\nconst assert = require('assert');\n\nclass ConnectionSpec {\n  constructor(rawData, typeVarMap) {\n    this.rawData = rawData;\n    this.direction = rawData.direction;\n    this.name = rawData.name;\n    this.type = rawData.type.assignVariableIds(typeVarMap);\n  }\n\n  get mustCreate() {\n    return this.direction == \"create\";\n  }\n\n  get isInput() {\n    return this.direction == \"in\";\n  }\n\n  get isOutput() {\n    return this.direction == \"out\" || this.direction == \"create\";\n  }\n}\n\nclass SlotSpec {\n  constructor(slotModel) {\n    this.name = slotModel.name;\n    this.isRequired = slotModel.isRequired;\n    this.formFactor = slotModel.formFactor;\n    this.providedSlots = [];\n    slotModel.providedSlots.forEach(ps => {\n      this.providedSlots.push(new ProvidedSlotSpec(ps.name, ps.formFactor, ps.views));\n    });\n  }\n}\n\nclass ProvidedSlotSpec {\n  constructor(name, formFactor, views) {\n    this.name = name;\n    this.formFactor = formFactor;\n    this.views = views;\n  }\n}\n\nclass ParticleSpec {\n  constructor(model, resolveSchema) {\n    // TODO: This should really happen after parsing, not here.\n    if (model.args)\n      model.args.forEach(arg => arg.type = arg.type.resolveSchemas(resolveSchema));\n    else\n      model.args = [];\n    this._model = model;\n    this.name = model.name;\n    var typeVarMap = new Map();\n    this.connections = model.args.map(a => new ConnectionSpec(a, typeVarMap));\n    this.connectionMap = new Map();\n    this.connections.forEach(a => this.connectionMap.set(a.name, a));\n    this.inputs = this.connections.filter(a => a.isInput);\n    this.outputs = this.connections.filter(a => a.isOutput);\n    this.exposes = model.exposes;  // TODO: deprecate and use this.slots instead.\n    this.renders = model.renders;  // TODO: deprecate and use this.slots instead.\n    this.transient = model.transient;\n    this.description = model.description;\n    this.implFile = model.implFile;\n    this.affordance = model.affordance;\n    this.slots = new Map();\n    if (model.slots)\n      model.slots.forEach(s => this.slots.set(s.name, new SlotSpec(s)));\n    // Verify provided slots use valid view connection names.\n    this.slots.forEach(slot => {\n      slot.providedSlots.forEach(ps => {\n        ps.views.forEach(v => assert(this.connectionMap.has(v), 'Cannot provide slot for nonexistent view constraint ', v));\n      });\n    });\n  }\n\n  isInput(param) {\n    for (let input of this.inputs) if (input.name == param) return true;\n  }\n\n  isOutput(param) {\n    for (let outputs of this.outputs) if (outputs.name == param) return true;\n  }\n\n  getSlotSpec(slotName) {\n    return this.slots.get(slotName);\n  }\n\n  toLiteral() {\n    let {args, name, exposes, renders, transient, description, implFile} = this._model;\n    args = args.map(a => {\n      let {type, direction, name} = a;\n      type = type.toLiteral();\n      return {type, direction, name};\n    });\n    return {args, name, exposes, renders, transient, description, implFile};\n  }\n\n  static fromLiteral(literal) {\n    literal.args.forEach(a => a.type = Type.fromLiteral(a.type));\n    return new ParticleSpec(literal, () => assert(false));\n  }\n}\n\nmodule.exports = ParticleSpec;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/particle-spec.js\n// module id = 9\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\nconst Entity = require(\"./entity.js\");\nconst assert = require('assert');\nconst Type = require('./type.js');\n\nclass Schema {\n  constructor(model) {\n    this._model = model;\n    this.name = model.name;\n    this.parent = model.parent ? new Schema(model.parent) : null;\n    this._normative = {};\n    this._optional = {};\n    assert(model.sections);\n    for (var section of model.sections) {\n      var into = section.sectionType == 'normative' ? this._normative : this._optional;\n      for (var field in section.fields) {\n        // TODO normalize field types here?\n        into[field] = section.fields[field];\n      }\n    }\n  }\n\n  toLiteral() {\n    return this._model;\n  }\n\n  get type() {\n    return Type.newEntity(this.toLiteral());\n  }\n\n  get normative() {\n    var dict = this.parent ? this.parent.normative : {};\n    Object.assign(dict, this._normative);\n    return dict;\n  }\n\n  get optional() {\n    var dict = this.parent ? this.parent.optional : {};\n    Object.assign(dict, this._optional);\n    return dict;\n  }\n\n  entityClass() {\n    let schema = this;\n    const name = this.name;\n    var clazz = class extends Entity {\n      constructor(data) {\n        super();\n        this.rawData = data;\n      }\n\n      static get key() {\n        return {\n          tag: 'entity',\n          schema: schema.toLiteral(),\n        };\n      }\n    }\n    Object.defineProperty(clazz, 'type', {value: this.type});\n    Object.defineProperty(clazz, 'name', {value: this.name});\n    for (let property in this.normative) {\n      // TODO: type checking, make a distinction between normative\n      // and optional properties.\n      // TODO: add query / getter functions for user properties\n      Object.defineProperty(clazz.prototype, property, {\n        get: function() {\n          return this.rawData[property];\n        },\n        set: function(v) {\n          this.rawData[property] = v;\n        }\n      });\n    }\n    for (let property in this.optional) {\n      Object.defineProperty(clazz.prototype, property, {\n        get: function() {\n          return this.rawData[property];\n        },\n        set: function(v) {\n          this.rawData[property] = v;\n        }\n      });\n    }\n    return clazz;\n  }\n}\n\nmodule.exports = Schema;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/schema.js\n// module id = 10\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Split a filename into [root, dir, basename, ext], unix version\n// 'root' is just a slash, or nothing.\nvar splitPathRe =\n    /^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/;\nvar splitPath = function(filename) {\n  return splitPathRe.exec(filename).slice(1);\n};\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function(path) {\n  var result = splitPath(path),\n      root = result[0],\n      dir = result[1];\n\n  if (!root && !dir) {\n    // No dirname whatsoever\n    return '.';\n  }\n\n  if (dir) {\n    // It has a dirname, strip trailing slash\n    dir = dir.substr(0, dir.length - 1);\n  }\n\n  return root + dir;\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPath(path)[2];\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPath(path)[3];\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/path-browserify/index.js\n// module id = 11\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nconst {\n  Particle,\n  ViewChanges,\n  //StateChanges,\n  //SlotChanges\n} = require(\"./particle.js\");\n\nconst XenStateMixin = require(\"./browser/lib/xen-state.js\");\n\n//let log = !global.document || (global.logging === false) ? () => {} : console.log.bind(console, `---------- DomParticle::`);\n//console.log(!!global.document, global.logging, log);\n\nlet log = false ? console.log.bind(console) : () => {};\n\n/** @class DomParticle\n * Particle that does stuff with DOM.\n */\nclass DomParticle extends XenStateMixin(Particle) {\n  /** @method get template()\n   * Override to return a String defining primary markup.\n   */\n  get template() {\n    return '';\n  }\n  /** @method getTemplate(slotName)\n   * Override to return a String defining primary markup for the given slot name.\n   */\n  getTemplate(slotName) {\n    // TODO: only supports a single template for now. add multiple templates support.\n    return this.template;\n  }\n  /** @method _shouldRender(props, state)\n   * Override to return false if the Particle won't use\n   * it's slot.\n   */\n  _shouldRender(props, state) {\n    return true;\n  }\n  /** @method _render(props, state)\n   * Override to return a dictionary to map into the template.\n   */\n  _render(props, state) {\n    return {};\n  }\n  /** @method _willReceiveProps(props)\n   * Override if necessary, to do things when props change.\n   */\n  _willReceiveProps(props) {\n  }\n  /** @method get config()\n   * Override if necessary, to modify superclass config.\n   */\n  get config() {\n    // TODO(sjmiles): getter that does work is a bad idea, this is temporary\n    return {\n      // TODO(sjmiles): output views shouldn't be included here, but afaict, `inout`\n      // doesn't work yet in manifest, so we are using `out` views for `inout` views\n      views: this.spec.inputs.map(i => i.name).concat(this.spec.outputs.map(o => o.name)),\n      // TODO(mmandlis): this.spec needs to be replace with a particle-spec loaded from\n      // .manifest files, instead of .ptcl ones.\n      slotNames: [ this.spec.renders.length && this.spec.renders[0].name.name ]\n    };\n  }\n  _info() {\n    return `---------- DomParticle::[${this.spec.name}]`;\n  }\n  async setViews(views) {\n    this._views = views;\n    let config = this.config;\n    this.when([new ViewChanges(views, config.views, 'change')], async () => {\n      //log(`${this.info()}: invalidated by [ViewChanges]`);\n      // acquire (async) list data from views\n      let data = await Promise.all(config.views.map(name => {\n        let view = views.get(name);\n        return view.toList ? view.toList() : view.get();\n      }));\n      // convert view data (array) into props (dictionary)\n      let props = config.views.reduce((props, name, i) => {\n        let value = data[i];\n        props[name] = (value && value.rawData) ? value.rawData : value;\n        return props;\n      }, Object.create(null));\n      this._setProps(props);\n    });\n  }\n  _update(props, state) {\n    this.config.slotNames.forEach(s => this.render(s, [\"model\"]));\n  }\n  render(slotName, contentTypes) {\n    let slot = this.getSlot(slotName);\n    if (!slot) {\n      return;  // didn't receive StartRender.\n    }\n    contentTypes.forEach(ct => slot._requestedContentTypes.add(ct));\n    if (this._shouldRender(this._props, this._state)) {\n      let content = {};\n      if (slot._requestedContentTypes.has(\"template\")) {\n        content[\"template\"] = this._initializeRender(slot);\n      }\n      if (slot._requestedContentTypes.has(\"model\")) {\n        content[\"model\"] = this._render(this._props, this._state);\n      }\n      slot.render(content);\n    } else if (slot.isRendered) {\n      // Send empty object, to clear rendered slot contents.\n      slot.render({});\n    }\n  }\n  _initializeRender(slot) {\n    let template = this.getTemplate(slot.slotName);\n    this._findHandlerNames(template).forEach(name => {\n      slot.clearEventHandlers(name);\n      slot.registerEventHandler(name, eventlet => {\n        if (this[name]) {\n          this[name](eventlet, this._state, this._views);\n        }\n      });\n    });\n    return template;\n  }\n  _findHandlerNames(html) {\n    let handlers = new Map();\n    let re = /on-.*?=\\\"([^\\\"]*)\"/gmi;\n    for (let m=re.exec(html); m; m=re.exec(html)) {\n      handlers.set(m[1], true);\n    }\n    return Array.from(handlers.keys());\n  }\n}\n\nmodule.exports = DomParticle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/dom-particle.js\n// module id = 12\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst assert = require('assert');\nconst Entity = require('./entity.js');\nconst Type = require('./type.js');\nconst Symbols = require('./symbols.js');\n\n// TODO: Should relations normalized by another layer, or here?\nclass Relation extends Entity {\n  constructor(...entities) {\n    super();\n    this.entities = entities;\n  }\n  get data() {\n    return this.entities.map(entity => entity[Symbols.identifier].toLiteral());\n  }\n  static typeFor(relation) {\n    var result = new Type(relation.entities.map(entity => entity.constructor.type), relation.constructor);\n    return result;\n  }\n}\n\nmodule.exports = Relation;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/relation.js\n// module id = 13\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nconst assert = require('assert');\nconst view = require('./view.js');\nconst Symbols = require('./symbols.js');\nconst Entity = require('./entity.js');\nconst Schema = require('./schema.js');\nconst Type = require('./type.js');\nconst Relation = require('./relation.js');\n\nfunction testEntityClass(type) {\n  return new Schema({\n    name: type,\n    sections: [],\n  }).entityClass();\n}\n\nlet BasicEntity = testEntityClass('BasicEntity');\n\nObject.assign(exports, {\n  Entity,\n  BasicEntity,\n  Relation,\n  testing: {\n    testEntityClass,\n  },\n  internals: {\n    identifier: Symbols.identifier,\n    Type,\n    View: view.View,\n    ViewBase: view.ViewBase,\n    SingletonView: view.SingletonView\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/runtime.js\n// module id = 14\n// module chunks = 0","// @\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst assert = require('assert');\nconst tracing = require(\"tracelib\");\nconst scheduler = require('./scheduler.js');\n\nclass ViewBase {\n  constructor(type, arc, name, id) {\n    var trace = tracing.start({cat: 'view', name: 'ViewBase::constructor', args: {type: type.key, name: name}});\n    this._type = type;\n    this._arc = arc;\n    this._listeners = new Map();\n    this.name = name;\n    this._version = 0;\n    this.id = id || this._arc.generateID();\n    trace.end();\n  }\n\n  generateID() {\n    return this._arc.generateID();\n  }\n\n  get type() {\n    return this._type;\n  }\n  // TODO: add 'once' which returns a promise.\n  on(kind,  callback, target) {\n    assert(target !== undefined, \"must provide a target to register a view event handler\");\n    let listeners = this._listeners.get(kind) || new Map();\n    listeners.set(callback, {version: -Infinity, target});\n    this._listeners.set(kind, listeners);\n  }\n\n  _fire(kind, details) {\n    var listenerMap = this._listeners.get(kind);\n    if (!listenerMap || listenerMap.size == 0)\n      return;\n\n    var callTrace = tracing.start({cat: 'view', name: 'ViewBase::_fire', args: {kind, type: this._type.key,\n        name: this.name, listeners: listenerMap.size}});\n\n    // TODO: wire up a target (particle)\n    let eventRecords = [];\n\n    for (let [callback, registration] of listenerMap.entries()) {\n      let target = registration.target;\n      eventRecords.push({target, callback, kind, details});\n    }\n\n    scheduler.enqueue(this, eventRecords);\n\n    callTrace.end();\n  }\n}\n\nclass View extends ViewBase {\n  constructor(type, arc, name, id) {\n    super(type, arc, name, id);\n    this._items = new Map();\n  }\n\n  clone() {\n    var view = new View(this._type, this._arc, this.name, this.id);\n    view.cloneFrom(this);\n    return view;\n  }\n\n  cloneFrom(view) {\n    this._items = new Map(view._items);\n    this._version = view._version;\n    this.description = view.description;\n  }\n\n  get(id) {\n    return this._items.get(id);\n  }\n  traceInfo() {\n    return {items: this._items.size};\n  }\n  // HACK: replace this with some kind of iterator thing?\n  toList() {\n    return [...this._items.values()];\n  }\n\n  store(entity) {\n    var trace = tracing.start({cat: \"view\", name: \"View::store\", args: {name: this.name}});\n    var entityWasPresent = this._items.has(entity.id);\n\n    this._items.set(entity.id, entity);\n    this._version++;\n    trace.update({ entity });\n    if (!entityWasPresent)\n      this._fire('change', {add: [entity], version: this._version});\n    trace.end();\n  }\n\n  remove(id) {\n    var trace = tracing.start({cat: \"view\", name: \"View::remove\", args: {name: this.name}});\n    if (!this._items.has(id)) {\n      return;\n    }\n    let entity = this._items.get(id);\n    assert(this._items.delete(id));\n    this._version++;\n    trace.update({ entity });\n    this._fire('change', {remove: [entity], version: this._version});\n    trace.end();\n  }\n\n  // TODO: Something about iterators??\n  // TODO: Something about changing order?\n\n  extractEntities(set) {\n    this._items.forEach(a => set.add(a));\n  }\n\n  serialize(list) {\n    list.push({\n      id: this.id,\n      sort: 'view',\n      type: this.type.toLiteral(),\n      name: this.name,\n      values: this.toList().map(a => a.id),\n      version: this._version\n    });\n  }\n\n  serializeMappingRecord(list) {\n    list.push({\n      id: this.id,\n      sort: 'view',\n      type: this.type.toLiteral(),\n      name: this.name,\n      version: this._version,\n      arc: this._arc.id\n    })\n  }\n}\n\nclass Variable extends ViewBase {\n  constructor(type, arc, name, id) {\n    super(type, arc, name, id);\n    this._stored = null;\n  }\n\n  clone() {\n    var variable = new Variable(this._type, this._arc, this.name, this.id);\n    variable.cloneFrom(this);\n    return variable;\n  }\n\n  cloneFrom(variable) {\n    this._stored = variable._stored;\n    this._version = variable._version;\n  }\n\n  traceInfo() {\n    return {stored: this._stored !== null};\n  }\n\n  get() {\n    return this._stored;\n  }\n\n  set(entity) {\n    this._stored = entity;\n    this._version++;\n    this._fire('change', {data: this._stored, version: this._version});\n  }\n\n  clear() {\n    this.set(undefined);\n  }\n\n  extractEntities(set) {\n    if (!this._stored) {\n      return;\n    }\n    set.add(this._stored);\n  }\n\n  serialize(list) {\n    if (this._stored == undefined)\n      return;\n    list.push({\n      id: this.id,\n      sort: 'variable',\n      type: this.type.toLiteral(),\n      name: this.name,\n      value: this._stored.id,\n      version: this._version\n    });\n  }\n\n  serializeMappingRecord(list) {\n    list.push({\n      id: this.id,\n      sort: 'variable',\n      type: this.type.toLiteral(),\n      name: this.name,\n      version: this._version,\n      arc: this._arc.id\n    })\n  }\n}\n\nObject.assign(module.exports, {\n  View,\n  Variable,\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/view.js\n// module id = 15\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nconst Loader = require('../../arcs/runtime/loader.js');\nconst particle = require(\"../../arcs/runtime/particle.js\");\nconst DomParticle = require(\"../../arcs/runtime/dom-particle.js\");\n\nmodule.exports = class BrowserLoader extends Loader {\n  constructor(urlMap) {\n    super();\n    this._urlMap = urlMap;\n    // TODO: Update all callers to pass a valid base URL to avoid the use of\n    //       location here. `new URL(base)` should be valid.\n    //this._base = new URL(base || '', global.location).href;\n  }\n  _resolve(path) {\n    //return new URL(path, this._base).href;\n    let url = this._urlMap[path];\n    if (!url && path) {\n      // TODO(sjmiles): inefficient!\n      let macro = Object.keys(this._urlMap).sort((a,b) => b.length - a.length).find(k => path.slice(0, k.length) == k);\n      if (macro) {\n        url = this._urlMap[macro] + path.slice(macro.length);\n      }\n    }\n    url = url || path;\n    //console.log(`browser-cdn-loader: resolve(${path}) = ${url}`);\n    return url;\n  }\n  loadFile(name) {\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', this._resolve(name), false);\n    xhr.send();\n    return xhr.responseText;\n  }\n  requireParticle(fileName) {\n    let path = this._resolve(fileName);\n    let result = [];\n    self.defineParticle = function(particleWrapper) {\n      result.push(particleWrapper);\n    };\n    importScripts(path);\n    delete self.defineParticle;\n    return this.unwrapParticle(result[0]);\n  }\n  unwrapParticle(particleWrapper) {\n    // TODO(sjmiles): regarding `resolver`:\n    //  _resolve method allows particles to request remapping of assets paths\n    //  for use in DOM\n    let resolver = this._resolve.bind(this);\n    return particleWrapper({particle, Particle: particle.Particle, DomParticle, resolver});\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/browser-cdn-loader.js\n// module id = 16\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nconst Type = require('./type.js');\nconst viewlet = require('./viewlet.js');\nconst define = require('./particle.js').define;\nconst assert = require('assert');\nconst PECInnerPort = require('./api-channel.js').PECInnerPort;\nconst ParticleSpec = require('./particle-spec.js');\nconst Schema = require('./schema.js');\n\nclass RemoteView {\n  constructor(id, type, port, pec, name, version) {\n    this._id = id;\n    this.type = type;\n    this._port = port;\n    this._pec = pec;\n    this.name = name;\n    this._version = version;\n    this.state = 'outOfDate';\n  }\n\n  generateID() {\n    return this._pec.generateID();\n  }\n\n  on(type, callback, target) {\n    var dataFreeCallback = (d) => callback();\n    this.synchronize(type, dataFreeCallback, dataFreeCallback, target);\n  }\n\n  synchronize(type, modelCallback, callback, target) {\n    this._port.Synchronize({view: this, modelCallback, callback, target, type});\n  }\n\n  get() {\n    return new Promise((resolve, reject) =>\n      this._port.ViewGet({ callback: r => {resolve(r)}, view: this }));\n  }\n\n  toList() {\n    return new Promise((resolve, reject) =>\n      this._port.ViewToList({ callback: r => resolve(r), view: this }));\n  }\n\n  set(entity) {\n    this._port.ViewSet({data: entity, view: this});\n  }\n\n  store(entity) {\n    this._port.ViewStore({data: entity, view: this});\n  }\n}\n\nclass InnerPEC {\n  constructor(port, idBase, loader) {\n    this._apiPort = new PECInnerPort(port);\n    this._views = new Map();\n    this._particles = [];\n    this._idBase = idBase;\n    this._nextLocalID = 0;\n    this._loader = loader;\n    this._pendingLoads = [];\n\n    /*\n     * This code ensures that the relevant types are known\n     * in the scope object, because otherwise we can't do\n     * particleSpec resolution, which is currently a necessary\n     * part of particle construction.\n     *\n     * Possibly we should eventually consider having particle\n     * specifications separated from particle classes - and\n     * only keeping type information on the arc side.\n     */\n    this._apiPort.onDefineView = ({viewType, identifier, name, version}) => {\n      return new RemoteView(identifier, Type.fromLiteral(viewType), this._apiPort, this, name, version);\n    };\n\n    this._apiPort.onDefineParticle = ({particleDefinition, particleFunction}) => {\n      var particle = define(particleDefinition, eval(particleFunction));\n      this._loader.registerParticle(particle);\n    };\n\n    this._apiPort.onStop = () => {\n      if (global.close) {\n        global.close();\n      }\n    }\n\n    this._apiPort.onInstantiateParticle =\n      ({spec, views}) => this._instantiateParticle(spec, views);\n\n    this._apiPort.onViewCallback = ({callback, data}) => callback(data);\n\n    this._apiPort.onAwaitIdle = ({version}) =>\n      this.idle.then(a => this._apiPort.Idle({version, relevance: this.relevance}));\n\n    this._apiPort.onUIEvent = ({particle, slotName, event}) => particle.fireEvent(slotName, event);\n\n    this._apiPort.onStartRender = ({particle, slotName, contentTypes}) => {\n      class Slotlet {\n        constructor(pec, particle, slotName) {\n          this._slotName = slotName;\n          this._particle = particle;\n          this._handlers = new Map();\n          this._pec = pec;\n          this._requestedContentTypes = new Set();\n        }\n        get particle() { return this._particle; }\n        get slotName() { return this._slotName; }\n        get isRendered() { return this._isRendered; }\n        render(content) {\n          this._pec._apiPort.Render({particle, slotName, content});\n\n          Object.keys(content).forEach(key => { this._requestedContentTypes.delete(key) });\n          // Slot is considered rendered, if a non-empty content was sent and all requested content types were fullfilled.\n          this._isRendered = this._requestedContentTypes.size == 0 && (Object.keys(content).length > 0);\n        }\n        registerEventHandler(name, f) {\n          if (!this._handlers.has(name)) {\n            this._handlers.set(name, []);\n          }\n          this._handlers.get(name).push(f);\n        }\n        clearEventHandlers(name) {\n          this._handlers.set(name, []);\n        }\n        fireEvent(event) {\n          for (var handler of this._handlers.get(event.handler) || []) {\n            handler(event);\n          }\n        }\n      }\n\n      particle._slotByName.set(slotName, new Slotlet(this, particle, slotName));\n      particle.render(slotName, contentTypes);\n    };\n\n    this._apiPort.onStopRender = ({particle, slotName}) => {\n      assert(particle._slotByName.has(slotName),\n        `Stop render called for particle ${particle.name} slot ${slotName} without start render being called.`);\n      particle._slotByName.delete(slotName);\n    }\n  }\n\n  generateID() {\n    return `${this._idBase}:${this._nextLocalID++}`;\n  }\n\n  async _instantiateParticle(spec, views) {\n    let name = spec.name;\n    var resolve = null;\n    var p = new Promise((res, rej) => resolve = res);\n    this._pendingLoads.push(p);\n    let clazz = await this._loader.loadParticleClass(spec);;\n    let particle = new clazz();\n    this._particles.push(particle);\n\n    var viewMap = new Map();\n    views.forEach((value, key) => {\n      viewMap.set(key, viewlet.viewletFor(value, value.type.isView));\n    });\n\n    for (var view of viewMap.values()) {\n      var type = view.underlyingView().type;\n      let schemaModel;\n      if (type.isView) {\n        schemaModel = type.primitiveType().entitySchema;\n      } else {\n        schemaModel = type.entitySchema;\n      }\n      view.entityClass = new Schema(schemaModel).entityClass();\n    }\n\n    setTimeout(() => {\n      resolve();\n      var idx = this._pendingLoads.indexOf(p);\n      this._pendingLoads.splice(idx, 1);\n      particle.setViews(viewMap);\n    }, 0);\n    return particle;\n  }\n\n  get relevance() {\n    var rMap = new Map();\n    this._particles.forEach(p => {\n      if (p.relevances.length == 0)\n        return;\n      rMap.set(p, p.relevances);\n      p.relevances = [];\n    });\n    return rMap;\n  }\n\n  get busy() {\n    if (this._pendingLoads.length > 0)\n      return true;\n    for (let particle of this._particles) {\n      if (particle.busy) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  get idle() {\n    if (!this.busy) {\n      return Promise.resolve();\n    }\n    return Promise.all(this._pendingLoads.concat(this._particles.map(particle => particle.idle))).then(() => this.idle);\n  }\n}\n\nmodule.exports = InnerPEC;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/inner-PEC.js\n// module id = 17\n// module chunks = 0","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/indexof/index.js\n// module id = 18\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/~/inherits/inherits_browser.js\n// module id = 19\n// module chunks = 0","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/support/isBufferBrowser.js\n// module id = 20\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/util/util.js\n// module id = 21\n// module chunks = 0","var indexOf = require('indexof');\n\nvar Object_keys = function (obj) {\n    if (Object.keys) return Object.keys(obj)\n    else {\n        var res = [];\n        for (var key in obj) res.push(key)\n        return res;\n    }\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nvar defineProp = (function() {\n    try {\n        Object.defineProperty({}, '_', {});\n        return function(obj, name, value) {\n            Object.defineProperty(obj, name, {\n                writable: true,\n                enumerable: false,\n                configurable: true,\n                value: value\n            })\n        };\n    } catch(e) {\n        return function(obj, name, value) {\n            obj[name] = value;\n        };\n    }\n}());\n\nvar globals = ['Array', 'Boolean', 'Date', 'Error', 'EvalError', 'Function',\n'Infinity', 'JSON', 'Math', 'NaN', 'Number', 'Object', 'RangeError',\n'ReferenceError', 'RegExp', 'String', 'SyntaxError', 'TypeError', 'URIError',\n'decodeURI', 'decodeURIComponent', 'encodeURI', 'encodeURIComponent', 'escape',\n'eval', 'isFinite', 'isNaN', 'parseFloat', 'parseInt', 'undefined', 'unescape'];\n\nfunction Context() {}\nContext.prototype = {};\n\nvar Script = exports.Script = function NodeScript (code) {\n    if (!(this instanceof Script)) return new Script(code);\n    this.code = code;\n};\n\nScript.prototype.runInContext = function (context) {\n    if (!(context instanceof Context)) {\n        throw new TypeError(\"needs a 'context' argument.\");\n    }\n    \n    var iframe = document.createElement('iframe');\n    if (!iframe.style) iframe.style = {};\n    iframe.style.display = 'none';\n    \n    document.body.appendChild(iframe);\n    \n    var win = iframe.contentWindow;\n    var wEval = win.eval, wExecScript = win.execScript;\n\n    if (!wEval && wExecScript) {\n        // win.eval() magically appears when this is called in IE:\n        wExecScript.call(win, 'null');\n        wEval = win.eval;\n    }\n    \n    forEach(Object_keys(context), function (key) {\n        win[key] = context[key];\n    });\n    forEach(globals, function (key) {\n        if (context[key]) {\n            win[key] = context[key];\n        }\n    });\n    \n    var winKeys = Object_keys(win);\n\n    var res = wEval.call(win, this.code);\n    \n    forEach(Object_keys(win), function (key) {\n        // Avoid copying circular objects like `top` and `window` by only\n        // updating existing context properties or new properties in the `win`\n        // that was only introduced after the eval.\n        if (key in context || indexOf(winKeys, key) === -1) {\n            context[key] = win[key];\n        }\n    });\n\n    forEach(globals, function (key) {\n        if (!(key in context)) {\n            defineProp(context, key, win[key]);\n        }\n    });\n    \n    document.body.removeChild(iframe);\n    \n    return res;\n};\n\nScript.prototype.runInThisContext = function () {\n    return eval(this.code); // maybe...\n};\n\nScript.prototype.runInNewContext = function (context) {\n    var ctx = Script.createContext(context);\n    var res = this.runInContext(ctx);\n\n    forEach(Object_keys(ctx), function (key) {\n        context[key] = ctx[key];\n    });\n\n    return res;\n};\n\nforEach(Object_keys(Script.prototype), function (name) {\n    exports[name] = Script[name] = function (code) {\n        var s = Script(code);\n        return s[name].apply(s, [].slice.call(arguments, 1));\n    };\n});\n\nexports.createScript = function (code) {\n    return exports.Script(code);\n};\n\nexports.createContext = Script.createContext = function (context) {\n    var copy = new Context();\n    if(typeof context === 'object') {\n        forEach(Object_keys(context), function (key) {\n            copy[key] = context[key];\n        });\n    }\n    return copy;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vm-browserify/index.js\n// module id = 22\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n\n'use strict';\n\nconst InnerPec = require('../../arcs/runtime/inner-PEC.js');\nconst Loader = require('./browser-cdn-loader.js');\n\nself.onmessage = function(e) {\n  self.onmessage = null;\n  let {id, base} = e.data;\n  console.log('starting worker', id);\n  new InnerPec(e.ports[0], id, new Loader(base));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./source/worker-entry-cdn.js\n// module id = 23\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nconst assert = require('assert');\nconst ParticleSpec = require('./particle-spec.js');\n\nclass ThingMapper {\n  constructor(prefix) {\n    this._prefix = prefix;\n    this._nextIdentifier = 0;\n    this._idMap = new Map();\n    this._reverseIdMap = new Map();\n  }\n\n  _newIdentifier() {\n    return this._prefix + (this._nextIdentifier++);\n  }\n\n  createMappingForThing(thing) {\n    assert(!this._reverseIdMap.has(thing));\n    var id = this._newIdentifier();\n    this._idMap.set(id, thing);\n    this._reverseIdMap.set(thing, id);\n    return id;\n  }\n\n  maybeCreateMappingForThing(thing) {\n    if (this.hasMappingForThing(thing)) {\n      return this.identifierForThing(thing);\n    }\n    return this.createMappingForThing(thing);\n  }\n\n  establishThingMapping(id, thing) {\n    this._idMap.set(id, thing);\n    this._reverseIdMap.set(thing, id);\n  }\n\n  hasMappingForThing(thing) {\n    return this._reverseIdMap.has(thing);\n  }\n\n  identifierForThing(thing) {\n    assert(this._reverseIdMap.has(thing));\n    return this._reverseIdMap.get(thing);\n  }\n\n  thingForIdentifier(id) {\n    assert(this._idMap.has(id));\n    return this._idMap.get(id);\n  }\n}\n\n\nclass APIPort {\n  constructor(messagePort, prefix) {\n    this._port = messagePort;\n    this._mapper = new ThingMapper(prefix);\n    this._messageMap = new Map();\n    this._port.onmessage = e => this._handle(e);\n    this.messageCount = 0;\n\n    this.Direct = {\n      convert: a => a,\n      unconvert: a => a\n    }\n\n    this.Stringify = {\n      convert: a => a.toString(),\n      unconvert: a => eval(a)\n    }\n\n    this.LocalMapped = {\n      convert: a => this._mapper.maybeCreateMappingForThing(a),\n      unconvert: a => this._mapper.thingForIdentifier(a)\n    }\n\n    this.Mapped = {\n      convert: a => this._mapper.identifierForThing(a),\n      unconvert: a => this._mapper.thingForIdentifier(a)\n    }\n\n    this.Dictionary = function(primitive) {\n      return {\n        convert: a => {\n          var r = {};\n          for (var key in a) {\n            r[key] = primitive.convert(a[key]);\n          }\n          return r;\n        }\n      }\n    }\n\n    this.Map = function(keyprimitive, valueprimitive) {\n      return {\n        convert: a => {\n          var r = {};\n          a.forEach((value, key) => r[keyprimitive.convert(key)] = valueprimitive.convert(value));\n          return r;\n        },\n        unconvert: a => {\n          var r = new Map();\n          for (var key in a)\n            r.set(keyprimitive.unconvert(key), valueprimitive.unconvert(a[key]));\n          return r;\n        }\n      }\n    }\n\n    this.List = function(primitive) {\n      return {\n        convert: a => a.map(v => primitive.convert(v)),\n        unconvert: a => a.map(v => primitive.unconvert(v))\n      }\n    }\n\n    this.ByLiteral = function(clazz) {\n      return {\n        convert: a => a.toLiteral(),\n        unconvert: a => clazz.fromLiteral(a)\n      }\n    }\n  }\n\n  close() {\n    this._port.close();\n  }\n\n  _handle(e) {\n    assert(this._messageMap.has(e.data.messageType));\n\n    this.messageCount++;\n\n    var handler = this._messageMap.get(e.data.messageType);\n    var args = this._unprocessArguments(handler, e.data.messageBody);\n    var r = this[\"on\" + e.data.messageType](args);\n    if (r && args.identifier) {\n      if (r instanceof Promise)\n        r.then(v => this._mapper.establishThingMapping(args.identifier, v));\n      else\n        this._mapper.establishThingMapping(args.identifier, r);\n    }\n  }\n\n  _processArguments(argumentTypes, args) {\n    var messageBody = {};\n    for (var argument in argumentTypes)\n      messageBody[argument] = argumentTypes[argument].convert(args[argument]);\n    return messageBody;\n  }\n\n  _unprocessArguments(argumentTypes, args) {\n    var messageBody = {};\n    for (var argument in argumentTypes)\n      messageBody[argument] = argumentTypes[argument].unconvert(args[argument]);\n    return messageBody;\n  }\n\n  registerCall(name, argumentTypes) {\n    this[name] = args => {\n      var call = { messageType: name, messageBody: this._processArguments(argumentTypes, args) };\n      this._port.postMessage(call);\n    };\n  }\n\n  registerHandler(name, argumentTypes) {\n    this._messageMap.set(name, argumentTypes);\n  }\n\n  registerInitializerHandler(name, argumentTypes) {\n    argumentTypes.identifier = this.Direct;\n    this._messageMap.set(name, argumentTypes);\n  }\n\n  registerInitializer(name, argumentTypes) {\n    this[name] = (thing, args) => {\n      var call = { messageType: name, messageBody: this._processArguments(argumentTypes, args) };\n      call.messageBody.identifier = this._mapper.createMappingForThing(thing);\n      this._port.postMessage(call);\n    };\n  }\n\n  registerRedundantInitializer(name, argumentTypes) {\n    this[name] = (thing, args) => {\n      if (this._mapper.hasMappingForThing(thing))\n        return;\n      var call = { messageType: name, messageBody: this._processArguments(argumentTypes, args) };\n      call.messageBody.identifier = this._mapper.createMappingForThing(thing);\n      this._port.postMessage(call);\n    };\n  }\n}\n\nclass PECOuterPort extends APIPort {\n  constructor(messagePort) {\n    super(messagePort, 'o');\n\n    this.registerCall(\"Stop\", {});\n    this.registerCall(\"DefineParticle\",\n      {particleDefinition: this.Direct, particleFunction: this.Stringify});\n    this.registerRedundantInitializer(\"DefineView\", {viewType: this.Direct, name: this.Direct})\n    this.registerInitializer(\"InstantiateParticle\",\n      {spec: this.ByLiteral(ParticleSpec), views: this.Map(this.Direct, this.Mapped)});\n\n    this.registerCall(\"UIEvent\", {particle: this.Mapped, slotName: this.Direct, event: this.Direct});\n    this.registerCall(\"ViewCallback\", {callback: this.Direct, data: this.Direct});\n    this.registerCall(\"AwaitIdle\", {version: this.Direct});\n    this.registerCall(\"StartRender\", {particle: this.Mapped, slotName: this.Direct, contentTypes: this.List(this.Direct)});\n    this.registerCall(\"StopRender\", {particle: this.Mapped, slotName: this.Direct});\n\n    this.registerHandler(\"Render\", {particle: this.Mapped, slotName: this.Direct, content: this.Direct});\n    this.registerHandler(\"Synchronize\", {view: this.Mapped, target: this.Mapped,\n                                    type: this.Direct, callback: this.Direct,\n                                    modelCallback: this.Direct});\n    this.registerHandler(\"ViewGet\", {view: this.Mapped, callback: this.Direct});\n    this.registerHandler(\"ViewToList\", {view: this.Mapped, callback: this.Direct});\n    this.registerHandler(\"ViewSet\", {view: this.Mapped, data: this.Direct});\n    this.registerHandler(\"ViewStore\", {view: this.Mapped, data: this.Direct});\n    this.registerHandler(\"Idle\", {version: this.Direct, relevance: this.Map(this.Mapped, this.Direct)});\n  }\n}\n\nclass PECInnerPort extends APIPort {\n  constructor(messagePort) {\n    super(messagePort, 'i');\n\n    this.registerHandler(\"Stop\", {});\n    // particleFunction needs to be eval'd in context or it won't work.\n    this.registerHandler(\"DefineParticle\",\n      {particleDefinition: this.Direct, particleFunction: this.Direct});\n    this.registerInitializerHandler(\"DefineView\", {viewType: this.Direct, name: this.Direct});\n    this.registerInitializerHandler(\"InstantiateParticle\",\n      {spec: this.ByLiteral(ParticleSpec), views: this.Map(this.Direct, this.Mapped)});\n\n    this.registerHandler(\"UIEvent\", {particle: this.Mapped, slotName: this.Direct, event: this.Direct});\n    this.registerHandler(\"ViewCallback\", {callback: this.LocalMapped, data: this.Direct});\n    this.registerHandler(\"AwaitIdle\", {version: this.Direct});\n    this.registerHandler(\"StartRender\", {particle: this.Mapped, slotName: this.Direct, contentTypes: this.Direct});\n    this.registerHandler(\"StopRender\", {particle: this.Mapped, slotName: this.Direct});\n\n    this.registerCall(\"Render\", {particle: this.Mapped, slotName: this.Direct, content: this.Direct});\n    this.registerCall(\"Synchronize\", {view: this.Mapped, target: this.Mapped,\n                                 type: this.Direct, callback: this.LocalMapped,\n                                 modelCallback: this.LocalMapped});\n    this.registerCall(\"ViewGet\", {view: this.Mapped, callback: this.LocalMapped});\n    this.registerCall(\"ViewToList\", {view: this.Mapped, callback: this.LocalMapped});\n    this.registerCall(\"ViewSet\", {view: this.Mapped, data: this.Direct});\n    this.registerCall(\"ViewStore\", {view: this.Mapped, data: this.Direct});\n    this.registerCall(\"Idle\", {version: this.Direct, relevance: this.Map(this.Mapped, this.Direct)});\n  }\n}\n\nmodule.exports = { PECOuterPort, PECInnerPort };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/api-channel.js\n// module id = 24\n// module chunks = 0","let nob = () => Object.create(null);\n\nlet XenStaterMixin = Base => class extends Base {\n  constructor() {\n    super();\n    this._pendingProps = nob();\n    this._props = this._getInitialProps() || nob();\n    this._lastProps = nob();\n    this._state = this._getInitialState() || nob();\n    this._lastState = nob();\n  }\n  _getInitialProps() {\n  }\n  _getInitialState() {\n  }\n  _getProperty(name) {\n    return this._pendingProps[name] || this._props[name];\n  }\n  _setProperty(name, value) {\n    // dirty checking opportunity\n    if (this._validator || this._wouldChangeProp(name, value)) {\n      this._pendingProps[name] = value;\n      this._invalidateProps();\n    }\n  }\n  _wouldChangeProp(name, value) {\n    return (typeof value === 'object') || (this._props[name] !== value);\n  }\n  _setProps(props) {\n    // TODO(sjmiles): should this be a replace instead of a merge?\n    Object.assign(this._pendingProps, props);\n    this._invalidateProps();\n  }\n  _invalidateProps() {\n    this._propsInvalid = true;\n    this._invalidate();\n  }\n  _setState(state) {\n    Object.assign(this._state, state);\n    this._invalidate();\n  }\n  _async(fn) {\n    // TODO(sjmiles): SystemJS throws unless `Promise` is `window.Promise`\n    return Promise.resolve().then(fn.bind(this));\n    //return setTimeout(fn.bind(this), 10);\n  }\n  _invalidate() {\n    if (!this._validator) {\n      //this._log('register _async validate');\n      //console.log(this.localName + (this.id ? '#' + this.id : '') + ': invalidated');\n      this._validator = this._async(this._validate);\n    }\n  }\n  _validate() {\n    // try..catch to ensure we nullify `validator` before return\n    try {\n      // TODO(sjmiles): should this be a replace instead of a merge?\n      Object.assign(this._props, this._pendingProps);\n      if (this._propsInvalid) {\n        // TODO(sjmiles): should/can have different timing from rendering?\n        this._willReceiveProps(this._props, this._state);\n        this._propsInvalid = false;\n      }\n      //if (this._shouldUpdate(this._lastProps, this._lastState, this._props, this._state)) {\n        // TODO(sjmiles): consider throttling render to rAF\n        this._ensureMount();\n        this._update(this._props, this._state);\n      //}\n    } catch(x) {\n      console.error(x);\n    }\n    // nullify validator _after_ methods so state changes don't reschedule validation\n    // TODO(sjmiles): can/should there ever be state changes fom inside _update()? In React no, in Xen yes (until I have a good reason not too).\n    this._validator = null;\n    // save the old props and state\n    // TODO(sjmiles): don't need to create these for default _shouldUpdate\n    //this._lastProps = Object.assign(nob(), this._props);\n    //this._lastState = Object.assign(nob(), this._state);\n    this._didUpdate(this._props, this._state);\n  }\n  _ensureMount() {\n  }\n  _willReceiveProps(props, state) {\n  }\n  /*\n  _willReceiveState(props, state) {\n  }\n  _shouldUpdate(oldProps, oldState, props, state) {\n    return true;\n  }\n  */\n  _update(props, state) {\n  }\n  _didUpdate(props, state) {\n  }\n};\n\nmodule.exports = XenStaterMixin;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/browser/lib/xen-state.js\n// module id = 25\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst assert = require('assert');\nconst Type = require('./type.js');\n\n// TODO: relation identifier should incorporate key/value identifiers\nclass Identifier {\n  constructor(view, type, key) {\n    this.view = type;\n    this.type = type;\n    this.key = key;\n  }\n  toLiteral() {\n    return [this.view, this.type.toLiteral(), this.key];\n  }\n  static fromLiteral(data) {\n    let [view, literalType, key] = data;\n    return new Identifier(view, Type.fromLiteral(literalType), key);\n  }\n}\n\nmodule.exports = Identifier;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/identifier.js\n// module id = 26\n// module chunks = 0","/**\n * @license\n * Copyright (c) 2017 Google Inc. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * Code distributed by Google as part of this project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n\"use strict\";\n\nvar fs = require(\"fs\");\nvar assert = require(\"assert\");\nconst particle = require(\"./particle.js\");\nconst DomParticle = require(\"./dom-particle.js\");\nconst vm = require('vm');\n\nfunction schemaLocationFor(name) {\n  return `../entities/${name}.schema`;\n}\n\nclass Loader {\n  path(fileName) {\n    let path = fileName.replace(/[\\/][^\\/]+$/, '/')\n    return path;\n  }\n\n  join(prefix, path) {\n    // TODO(sjmiles): might need a more robust test here\n    if (path[0] === '/' || path.slice(0, 4) === 'http') {\n      return path;\n    }\n    return this.path(prefix) + path;\n  }\n\n  loadFile(file) {\n    return new Promise((resolve, reject) => {\n      fs.readFile(file, (err, data) => {\n        if (err)\n          reject(err);\n        else\n          resolve(data.toString('utf-8'));\n      });\n    });\n  }\n\n  async loadParticleClass(spec) {\n    let clazz = await this.requireParticle(spec.implFile);\n    clazz.spec = spec;\n    return clazz;\n  }\n\n  async requireParticle(fileName) {\n    let src = await this.loadFile(fileName);\n    // Note. This is not real isolation.\n    let script = new vm.Script(src, {fileName});\n    let result = [];\n    let self = {\n      defineParticle(particleWrapper) {\n        result.push(particleWrapper);\n      },\n      console,\n      importScripts: s => null //console.log(`(skipping browser-space import for [${s}])`)\n    };\n    script.runInNewContext(self);\n    return this.unwrapParticle(result[0]);\n  }\n\n  unwrapParticle(particleWrapper) {\n    return particleWrapper({particle, Particle: particle.Particle, DomParticle});\n  }\n\n}\n\nmodule.exports = Loader;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/loader.js\n// module id = 27\n// module chunks = 0","module.exports = function (args, opts) {\n    if (!opts) opts = {};\n    \n    var flags = { bools : {}, strings : {}, unknownFn: null };\n\n    if (typeof opts['unknown'] === 'function') {\n        flags.unknownFn = opts['unknown'];\n    }\n\n    if (typeof opts['boolean'] === 'boolean' && opts['boolean']) {\n      flags.allBools = true;\n    } else {\n      [].concat(opts['boolean']).filter(Boolean).forEach(function (key) {\n          flags.bools[key] = true;\n      });\n    }\n    \n    var aliases = {};\n    Object.keys(opts.alias || {}).forEach(function (key) {\n        aliases[key] = [].concat(opts.alias[key]);\n        aliases[key].forEach(function (x) {\n            aliases[x] = [key].concat(aliases[key].filter(function (y) {\n                return x !== y;\n            }));\n        });\n    });\n\n    [].concat(opts.string).filter(Boolean).forEach(function (key) {\n        flags.strings[key] = true;\n        if (aliases[key]) {\n            flags.strings[aliases[key]] = true;\n        }\n     });\n\n    var defaults = opts['default'] || {};\n    \n    var argv = { _ : [] };\n    Object.keys(flags.bools).forEach(function (key) {\n        setArg(key, defaults[key] === undefined ? false : defaults[key]);\n    });\n    \n    var notFlags = [];\n\n    if (args.indexOf('--') !== -1) {\n        notFlags = args.slice(args.indexOf('--')+1);\n        args = args.slice(0, args.indexOf('--'));\n    }\n\n    function argDefined(key, arg) {\n        return (flags.allBools && /^--[^=]+$/.test(arg)) ||\n            flags.strings[key] || flags.bools[key] || aliases[key];\n    }\n\n    function setArg (key, val, arg) {\n        if (arg && flags.unknownFn && !argDefined(key, arg)) {\n            if (flags.unknownFn(arg) === false) return;\n        }\n\n        var value = !flags.strings[key] && isNumber(val)\n            ? Number(val) : val\n        ;\n        setKey(argv, key.split('.'), value);\n        \n        (aliases[key] || []).forEach(function (x) {\n            setKey(argv, x.split('.'), value);\n        });\n    }\n\n    function setKey (obj, keys, value) {\n        var o = obj;\n        keys.slice(0,-1).forEach(function (key) {\n            if (o[key] === undefined) o[key] = {};\n            o = o[key];\n        });\n\n        var key = keys[keys.length - 1];\n        if (o[key] === undefined || flags.bools[key] || typeof o[key] === 'boolean') {\n            o[key] = value;\n        }\n        else if (Array.isArray(o[key])) {\n            o[key].push(value);\n        }\n        else {\n            o[key] = [ o[key], value ];\n        }\n    }\n    \n    function aliasIsBoolean(key) {\n      return aliases[key].some(function (x) {\n          return flags.bools[x];\n      });\n    }\n\n    for (var i = 0; i < args.length; i++) {\n        var arg = args[i];\n        \n        if (/^--.+=/.test(arg)) {\n            // Using [\\s\\S] instead of . because js doesn't support the\n            // 'dotall' regex modifier. See:\n            // http://stackoverflow.com/a/1068308/13216\n            var m = arg.match(/^--([^=]+)=([\\s\\S]*)$/);\n            var key = m[1];\n            var value = m[2];\n            if (flags.bools[key]) {\n                value = value !== 'false';\n            }\n            setArg(key, value, arg);\n        }\n        else if (/^--no-.+/.test(arg)) {\n            var key = arg.match(/^--no-(.+)/)[1];\n            setArg(key, false, arg);\n        }\n        else if (/^--.+/.test(arg)) {\n            var key = arg.match(/^--(.+)/)[1];\n            var next = args[i + 1];\n            if (next !== undefined && !/^-/.test(next)\n            && !flags.bools[key]\n            && !flags.allBools\n            && (aliases[key] ? !aliasIsBoolean(key) : true)) {\n                setArg(key, next, arg);\n                i++;\n            }\n            else if (/^(true|false)$/.test(next)) {\n                setArg(key, next === 'true', arg);\n                i++;\n            }\n            else {\n                setArg(key, flags.strings[key] ? '' : true, arg);\n            }\n        }\n        else if (/^-[^-]+/.test(arg)) {\n            var letters = arg.slice(1,-1).split('');\n            \n            var broken = false;\n            for (var j = 0; j < letters.length; j++) {\n                var next = arg.slice(j+2);\n                \n                if (next === '-') {\n                    setArg(letters[j], next, arg)\n                    continue;\n                }\n                \n                if (/[A-Za-z]/.test(letters[j]) && /=/.test(next)) {\n                    setArg(letters[j], next.split('=')[1], arg);\n                    broken = true;\n                    break;\n                }\n                \n                if (/[A-Za-z]/.test(letters[j])\n                && /-?\\d+(\\.\\d*)?(e-?\\d+)?$/.test(next)) {\n                    setArg(letters[j], next, arg);\n                    broken = true;\n                    break;\n                }\n                \n                if (letters[j+1] && letters[j+1].match(/\\W/)) {\n                    setArg(letters[j], arg.slice(j+2), arg);\n                    broken = true;\n                    break;\n                }\n                else {\n                    setArg(letters[j], flags.strings[letters[j]] ? '' : true, arg);\n                }\n            }\n            \n            var key = arg.slice(-1)[0];\n            if (!broken && key !== '-') {\n                if (args[i+1] && !/^(-|--)[^-]/.test(args[i+1])\n                && !flags.bools[key]\n                && (aliases[key] ? !aliasIsBoolean(key) : true)) {\n                    setArg(key, args[i+1], arg);\n                    i++;\n                }\n                else if (args[i+1] && /true|false/.test(args[i+1])) {\n                    setArg(key, args[i+1] === 'true', arg);\n                    i++;\n                }\n                else {\n                    setArg(key, flags.strings[key] ? '' : true, arg);\n                }\n            }\n        }\n        else {\n            if (!flags.unknownFn || flags.unknownFn(arg) !== false) {\n                argv._.push(\n                    flags.strings['_'] || !isNumber(arg) ? arg : Number(arg)\n                );\n            }\n            if (opts.stopEarly) {\n                argv._.push.apply(argv._, args.slice(i + 1));\n                break;\n            }\n        }\n    }\n    \n    Object.keys(defaults).forEach(function (key) {\n        if (!hasKey(argv, key.split('.'))) {\n            setKey(argv, key.split('.'), defaults[key]);\n            \n            (aliases[key] || []).forEach(function (x) {\n                setKey(argv, x.split('.'), defaults[key]);\n            });\n        }\n    });\n    \n    if (opts['--']) {\n        argv['--'] = new Array();\n        notFlags.forEach(function(key) {\n            argv['--'].push(key);\n        });\n    }\n    else {\n        notFlags.forEach(function(key) {\n            argv._.push(key);\n        });\n    }\n\n    return argv;\n};\n\nfunction hasKey (obj, keys) {\n    var o = obj;\n    keys.slice(0,-1).forEach(function (key) {\n        o = (o[key] || {});\n    });\n\n    var key = keys[keys.length - 1];\n    return key in o;\n}\n\nfunction isNumber (x) {\n    if (typeof x === 'number') return true;\n    if (/^0x[0-9a-f]+$/i.test(x)) return true;\n    return /^[-+]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(e[-+]?\\d+)?$/.test(x);\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/~/minimist/index.js\n// module id = 28\n// module chunks = 0","var path = require('path');\nvar fs = require('fs');\nvar _0777 = parseInt('0777', 8);\n\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\n\nfunction mkdirP (p, opts, f, made) {\n    if (typeof opts === 'function') {\n        f = opts;\n        opts = {};\n    }\n    else if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n    \n    var cb = f || function () {};\n    p = path.resolve(p);\n    \n    xfs.mkdir(p, mode, function (er) {\n        if (!er) {\n            made = made || p;\n            return cb(null, made);\n        }\n        switch (er.code) {\n            case 'ENOENT':\n                mkdirP(path.dirname(p), opts, function (er, made) {\n                    if (er) cb(er, made);\n                    else mkdirP(p, opts, cb, made);\n                });\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                xfs.stat(p, function (er2, stat) {\n                    // if the stat fails, then that's super weird.\n                    // let the original error be the failure reason.\n                    if (er2 || !stat.isDirectory()) cb(er, made)\n                    else cb(null, made);\n                });\n                break;\n        }\n    });\n}\n\nmkdirP.sync = function sync (p, opts, made) {\n    if (!opts || typeof opts !== 'object') {\n        opts = { mode: opts };\n    }\n    \n    var mode = opts.mode;\n    var xfs = opts.fs || fs;\n    \n    if (mode === undefined) {\n        mode = _0777 & (~process.umask());\n    }\n    if (!made) made = null;\n\n    p = path.resolve(p);\n\n    try {\n        xfs.mkdirSync(p, mode);\n        made = made || p;\n    }\n    catch (err0) {\n        switch (err0.code) {\n            case 'ENOENT' :\n                made = sync(path.dirname(p), opts, made);\n                sync(p, opts, made);\n                break;\n\n            // In the case of any other error, just see if there's a dir\n            // there already.  If so, then hooray!  If not, then something\n            // is borked.\n            default:\n                var stat;\n                try {\n                    stat = xfs.statSync(p);\n                }\n                catch (err1) {\n                    throw err0;\n                }\n                if (!stat.isDirectory()) throw err0;\n                break;\n        }\n    }\n\n    return made;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/~/mkdirp/index.js\n// module id = 29\n// module chunks = 0","/*\n  Copyright 2015 Google Inc. All Rights Reserved.\n  Licensed under the Apache License, Version 2.0 (the \"License\");\n  you may not use this file except in compliance with the License.\n  You may obtain a copy of the License at\n      http://www.apache.org/licenses/LICENSE-2.0\n  Unless required by applicable law or agreed to in writing, software\n  distributed under the License is distributed on an \"AS IS\" BASIS,\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  See the License for the specific language governing permissions and\n  limitations under the License.\n*/\n\nvar parseArgs = require('minimist');\n\nmodule.exports = parseArgs(process.argv.slice(2));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/~/tracelib/options.js\n// module id = 30\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst tracing = require(\"tracelib\");\nconst assert = require('assert');\n\nclass Scheduler {\n  constructor() {\n    this.frameQueue = [];\n    this.targetMap = new Map();\n    this._finishNotifiers = [];\n    this._idle = Promise.resolve();\n    this._idleResolver = null;\n  }\n\n  enqueue(view, eventRecords) {\n    var trace = tracing.flow({cat: 'view', name: 'ViewBase::_fire flow'}).start();\n    if (this.frameQueue.length == 0 && eventRecords.length > 0)\n      this._asyncProcess();\n    if (!this._idleResolver) {\n      this._idle = new Promise((resolve, reject) => this._idleResolver = resolve);\n    }\n    for (var record of eventRecords) {\n      var frame = this.targetMap.get(record.target);\n      if (frame == undefined) {\n        frame = {target: record.target, views: new Map(), traces: []};\n        this.frameQueue.push(frame);\n        this.targetMap.set(record.target, frame);\n      }\n      frame.traces.push(trace);\n      var viewEvents = frame.views.get(view);\n      if (viewEvents == undefined) {\n        viewEvents = new Map();\n        frame.views.set(view, viewEvents);\n      }\n      var kindEvents = viewEvents.get(record.kind);\n      if (kindEvents == undefined) {\n        kindEvents = [];\n        viewEvents.set(record.kind, kindEvents);\n      }\n      kindEvents.push(record);\n    }\n  }\n\n  get busy() {\n    return this.frameQueue.length > 0;\n  }\n\n  get idle() {\n    return this._idle;\n  }\n\n  _asyncProcess() {\n    Promise.resolve().then(() => {\n      assert(this.frameQueue.length > 0, \"_asyncProcess should not be invoked with 0 length queue\");\n      let frame = this.frameQueue.shift();\n      this.targetMap.delete(frame.target);\n      if (this.frameQueue.length > 0)\n        this._asyncProcess();\n      this._applyFrame(frame);\n      if (this.frameQueue.length == 0) {\n        this._idleResolver();\n        this._idleResolver = null;\n      }\n    });\n  }\n\n  _applyFrame(frame) {\n    var trace = tracing.start({cat: 'scheduler', name: 'Scheduler::_applyFrame', args: {target: frame.target ? frame.target.constructor.name : \"NULL TARGET\"}});\n\n    var totalRecords = 0;\n    for (let [view, kinds] of frame.views.entries()) {\n      for (let [kind, records] of kinds.entries()) {\n        var record = records[records.length - 1];\n        record.callback(record.details);\n      }\n    }\n\n    frame.traces.forEach(trace => trace.end());\n\n    trace.end();\n  }\n}\n\nmodule.exports = new Scheduler();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/scheduler.js\n// module id = 31\n// module chunks = 0","// @license\n// Copyright (c) 2017 Google Inc. All rights reserved.\n// This code may only be used under the BSD style license found at\n// http://polymer.github.io/LICENSE.txt\n// Code distributed by Google as part of this project is also\n// subject to an additional IP rights grant found at\n// http://polymer.github.io/PATENTS.txt\n'use strict';\n\nconst Identifier = require('./identifier.js');\nconst Entity = require('./entity.js');\nconst Relation = require('./relation.js');\nconst Symbols = require('./symbols.js');\nconst underlyingView = require('./view.js');\nlet identifier = Symbols.identifier;\nconst assert = require(\"assert\");\n\n// TODO: This won't be needed once runtime is transferred between contexts.\nfunction cloneData(data) {\n  return data;\n  //return JSON.parse(JSON.stringify(data));\n}\n\nfunction restore(entry, entityClass) {\n  let {id, rawData} = entry;\n  var entity = new entityClass(cloneData(rawData));\n\n  // TODO some relation magic, somewhere, at some point.\n\n  return entity;\n}\n\nclass Viewlet {\n  constructor(view) {\n    this._view = view;\n  }\n  underlyingView() {\n    return this._view;\n  }  \n  on(kind, callback, target) {\n    return this._view.on(kind, callback, target);\n  }\n\n  synchronize(kind, modelCallback, callback, target) {\n    return this._view.synchronize(kind, modelCallback, callback, target);\n  }\n\n  generateID() {\n    return this._view.generateID();\n  }\n\n  _serialize(entity) {\n    if (!entity.isIdentified())\n      entity.identify(this.generateID());\n    let id = entity[identifier];\n    let rawData = cloneData(entity.toLiteral());\n    return {\n      id,\n      rawData\n    };\n  }\n\n  _restore(entry) {\n    assert(this.entityClass, \"Viewlets need entity classes for deserialization\");\n    return restore(entry, this.entityClass);\n  }\n\n  get type() {\n    return this._view._type;\n  }\n  get name() {\n    return this._view.name;\n  }\n\n  get _id() {\n    return this._view._id;\n  }\n}\n\nclass View extends Viewlet {\n  constructor(view) {\n    // TODO: this should talk to an API inside the PEC.\n    super(view);\n  }\n  query() {\n    // TODO: things\n  }\n  async toList() {\n    // TODO: remove this and use query instead\n    return (await this._view.toList()).map(a => this._restore(a));\n  }\n  store(entity) {\n    var serialization = this._serialize(entity);\n    return this._view.store(serialization);\n  }\n  async debugString() {\n    var list = await this.toList();\n    return list ? ('[' + list.map(p => p.debugString).join(\", \") + ']') : 'undefined';\n  }\n}\n\nclass Variable extends Viewlet {\n  constructor(variable) {\n    super(variable);\n  }\n  async get() {\n    var result = await this._view.get();\n    var data = result == null ? undefined : this._restore(result);\n    return data;\n  }\n  set(entity) {\n    return this._view.set(this._serialize(entity));\n  }\n  async debugString() {\n    var value = await this.get();\n    return value ? value.debugString : 'undefined';\n  }\n}\n\nfunction viewletFor(view, isView) {\n  if (isView || (isView == undefined && view instanceof underlyingView.View))\n    view = new View(view);\n  else\n    view = new Variable(view);\n  return view;\n}\n\nmodule.exports = { viewletFor };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../arcs/runtime/viewlet.js\n// module id = 32\n// module chunks = 0"],"sourceRoot":""}