<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="strategy-explorer/strategy-explorer.html"></link>
<link rel="import" href="arc-explorer.html"></link>
<!--<link rel="import" href="../../../arcs/strategy-explorer/strategy-explorer.html">-->

<style>
  .explorer {
    display: none;
    background-color: white;
    width: 100%;
    height: 100%;
    position: fixed;
    z-index: 10;
  }
</style>

<script>
(function() {

  let explorer = document.body.appendChild(document.createElement('strategy-explorer'));
  explorer.className = 'explorer';

  window.addEventListener('keydown', e => {
    if (e.ctrlKey && (e.key == "e")) {
      e.preventDefault();
      explorer.style.display = explorer.style.display == 'block' ? 'none' : 'block';
    }
  });

  let populate = (population) => explorer.results = population.map(pop => explorer.preparePopulation(pop));

  document.addEventListener('generations', e => {
    explorer.reset();
    setTimeout(()=>populate(e.detail), 0);
  });

  let arcExplorer = document.body.appendChild(document.createElement('arc-explorer'));
  arcExplorer.className = 'explorer';

  window.addEventListener('keydown', e => {
    if (e.ctrlKey && (e.key == 'a')) {
      e.preventDefault();
      arcExplorer.style.display = arcExplorer.style.display == 'block' ? 'none' : 'block';
      console.log(arcExplorer.arc);
    }
  });
  
  document.addEventListener('apply', e => {
    arcExplorer.arc = e.detail.arc;
  });
})();
</script>