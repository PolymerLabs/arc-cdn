<!--<script src="https://www.gstatic.com/firebasejs/4.2.0/firebase-auth.js"></script>-->
<script src="https://cdn.firebase.com/libs/firebaseui/2.4.0/firebaseui.js"></script>
<link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/2.4.0/firebaseui.css">

<template>
  <div id="firebaseui-auth-container"></div>
</template>

<script>
  class ArcAuth extends XenBase {
    get host() {
      return this;
    }
    _didMount() {
      // FirebaseUI config.
      var uiConfig = {
        //signInSuccessUrl: '<url-to-redirect-to-on-success>',
        signInOptions: [
          // Leave the lines as is for the providers you want to offer your users.
          firebase.auth.GoogleAuthProvider.PROVIDER_ID,
          firebase.auth.FacebookAuthProvider.PROVIDER_ID,
          firebase.auth.TwitterAuthProvider.PROVIDER_ID,
          firebase.auth.GithubAuthProvider.PROVIDER_ID,
          firebase.auth.EmailAuthProvider.PROVIDER_ID,
          firebase.auth.PhoneAuthProvider.PROVIDER_ID
        ],
        // Terms of service url.
        //tosUrl: '<your-tos-url>'
      };
      // Initialize the FirebaseUI Widget using Firebase.
      var ui = new firebaseui.auth.AuthUI(firebase.auth());
      // The start method will wait until the DOM is loaded.
      ui.start('#firebaseui-auth-container', uiConfig);
      /*
      let provider = new firebase.auth.GoogleAuthProvider()
      if (false) {
        firebase.auth().signInWithPopup(provider).then(this._credential.bind(this));
      } else {
        firebase.auth().getRedirectResult().then(result => {
          if (result.user === null) {
            firebase.auth().signInWithRedirect(provider);
          } else {
            this._credential(result);
          }
        });
      }
      */
    }
    _credential(result) {
      ArcAuth.log('credential', result)
    }
  }
  ArcAuth.module = document.currentImport;
  ArcAuth.log = XenBase.logFactory('ArcAuth', '#00701a');
  customElements.define('arc-auth', ArcAuth);
</script>